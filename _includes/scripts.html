<script src="{{ site.baseurl | prepend: site.url }}/assets/js/jquery-1.12.2.min.js"></script>

<script src="{{ site.baseurl | prepend: site.url }}/assets/js/backtotop.js" defer></script>
<script src="{{ site.baseurl | prepend: site.url }}/assets/js/lunr.min.js" defer></script>
<script src="{{ site.baseurl | prepend: site.url }}/assets/js/lunr-feed.js" defer></script>
<script src="{{ site.baseurl | prepend: site.url }}/assets/js/jquery.fitvids.js" defer></script>
<script src="{{ site.baseurl | prepend: site.url }}/assets/js/svg4everybody.min.js" defer></script>
<script src="{{ site.baseurl | prepend: site.url }}/assets/js/scripts.js" defer></script>

{% if site.analytics_code != null %}


    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', '{{site.analytics_code}}', 'auto');
        ga('send', 'pageview');
    </script>

    <script>
        var prevScrollpos = window.pageYOffset;
        window.onscroll = function() {
            var currentScrollPos = window.pageYOffset;
            if (prevScrollpos > currentScrollPos) {
              document.getElementById("burgermenu").style.top = "40px";
                document.getElementById("navbar").style.top = "0px";


            } else {
                document.getElementById("navbar").style.top = "-500px";
                document.getElementById("burgermenu").style.top = "-540px";

            }
            prevScrollpos = currentScrollPos;
        }
    </script>

    <!-- opt out analytics -->
    <script>
    // Set to the same value as the web property used on the site
    var gaProperty = '{{site.analytics_code}}';

    // Disable tracking if the opt-out cookie exists.
    var disableStr = 'ga-disable-' + gaProperty;
    if (document.cookie.indexOf(disableStr + '=true') > -1) {
      window[disableStr] = true;
    }

    // Opt-out function
    function gaOptout() {
      document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
      window[disableStr] = true;
      console.log("ga-optout");
    }
    </script>

{% endif %}

<!-- defer loading all youtube video iframes
change all "src="https://www.youtube.com" to "src='' data-src='https://www.youtube.com'
see https://scottdeluzio.com/defer-parsing-javascript-youtube-videos/
FIXME - changing "src" to "data-src" breaks navbar somehow-->


<script src="{{ site.baseurl | prepend: site.url }}/assets/js/youcover.js"></script>


<script>
var disqus_loaded = false;
var disqus_config = function () {
this.page.url = 'https://markusneuschaefer.de';  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = 'markusneuschaefer'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
var disqus_shortname = 'markusneuschaefer'; //Add your shortname here
function disqus() {
    if (!disqus_loaded)  {
        disqus_loaded = true;
        var e = document.createElement("script");
        e.type = "text/javascript";
        e.async = true;
        e.src = "//" + disqus_shortname + ".disqus.com/embed.js";
        (document.getElementsByTagName("head")[0] ||
        document.getElementsByTagName("body")[0])
        .appendChild(e);
        //Hide the button after opening
        document.getElementById("disqus-comments-block").style.display = "none";
    }
}
//Opens comments when linked to directly
var hash = window.location.hash.substr(1);
if (hash.length > 8) {
    if (hash.substring(0, 8) == "comment-") {
        disqus();
    }
}
//Remove this if you don't want to load comments for search engines
if(/bot|google|baidu|bing|msn|duckduckgo|slurp|yandex/i.test(navigator.userAgent)) {
   disqus();
}
</script>
