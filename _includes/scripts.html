<script src="{{ site.baseurl | prepend: site.url }}/assets/js/jquery-1.12.2.min.js"></script>

<script src="{{ site.baseurl | prepend: site.url }}/assets/js/backtotop.js" defer></script>
<script src="{{ site.baseurl | prepend: site.url }}/assets/js/lunr.min.js" defer></script>
<script src="{{ site.baseurl | prepend: site.url }}/assets/js/lunr-feed.js" defer></script>
<script src="{{ site.baseurl | prepend: site.url }}/assets/js/jquery.fitvids.js" defer></script>
<script src="{{ site.baseurl | prepend: site.url }}/assets/js/svg4everybody.min.js" defer></script>
<script src="{{ site.baseurl | prepend: site.url }}/assets/js/scripts.js" defer></script>

<!-- {% if site.analytics_code != null %} -->


    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', '{{site.analytics_code}}', 'auto');
        ga('send', 'pageview');
    </script>

    <script>
        var prevScrollpos = window.pageYOffset;
        window.onscroll = function() {
            var currentScrollPos = window.pageYOffset;
            if (prevScrollpos > currentScrollPos) {
              document.getElementById("burgermenu").style.top = "40px";
                document.getElementById("navbar").style.top = "0px";


            } else {
                document.getElementById("navbar").style.top = "-500px";
                document.getElementById("burgermenu").style.top = "-540px";

            }
            prevScrollpos = currentScrollPos;
        }
    </script>


    <script>
      // check for cookies
      // https://stackoverflow.com/questions/5968196/check-cookie-if-cookie-exists

      var optOutDisplay = false;

      function getCookie(name) {
          var dc = document.cookie;
          var prefix = name + "=";
          var begin = dc.indexOf("; " + prefix);
          if (begin == -1) {
              begin = dc.indexOf(prefix);
              if (begin != 0) return null;
          }
          else
          {
              begin += 2;
              var end = document.cookie.indexOf(";", begin);
              if (end == -1) {
              end = dc.length;
              }
          }
          // because unescape has been deprecated, replaced with decodeURI
          //return unescape(dc.substring(begin + prefix.length, end));
          return decodeURI(dc.substring(begin + prefix.length, end));
      }

      // check if opt-out-cookie is set, then add confirmation text
      function checkForGaCookie() {
          var myCookie = getCookie("ga-disable-UA-44236559-1");

          if (myCookie == null) {
              // do cookie doesn't exist stuff;
              return;
          }
          else {

            if (optOutDisplay === false){
              // do cookie exists stuff
              var optoutText = "Google Analytics ist deaktiviert";
              document.getElementById('ga-optout-sidebar').innerHTML = optoutText;
              document.getElementById('ga-optout-impressum').innerHTML = optoutText;
              document.getElementById('ga-optout-datenschutz').innerHTML = optoutText;
              optOutDisplay = true;
              console.log("cookies deactivated");

            } else return;
          }
      }



  // opt out from google analytics
    // Set to the same value as the web property used on the site
    var gaProperty = 'UA-44236559-1';

    // Disable tracking if the opt-out cookie exists.
    var disableStr = 'ga-disable-' + gaProperty;
    if (document.cookie.indexOf(disableStr + '=true') > -1) {
      window[disableStr] = true;
    }

    // Opt-out function
    function gaOptout() {

      document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
      window[disableStr] = true;
      checkForGaCookie();


    }

checkForGaCookie();

    </script>



<!-- {% endif %} -->

<!-- defer loading all youtube video iframes
change all "src="https://www.youtube.com" to "src='' data-src='https://www.youtube.com'
see https://scottdeluzio.com/defer-parsing-javascript-youtube-videos/
FIXME - changing "src" to "data-src" breaks navbar somehow-->

<script src="{{ site.baseurl | prepend: site.url }}/assets/js/youcover.js"></script>


<script>
var disqus_loaded = false;
var disqus_config = function () {
this.page.url = 'https://markusneuschaefer.de';  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = 'markusneuschaefer'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
var disqus_shortname = 'markusneuschaefer'; //Add your shortname here
function disqus() {
    if (!disqus_loaded)  {
        disqus_loaded = true;
        var e = document.createElement("script");
        e.type = "text/javascript";
        e.async = true;
        e.src = "//" + disqus_shortname + ".disqus.com/embed.js";
        (document.getElementsByTagName("head")[0] ||
        document.getElementsByTagName("body")[0])
        .appendChild(e);
        //Hide the button after opening
        document.getElementById("disqus-comments-block").style.display = "none";
    }
}
//Opens comments when linked to directly
var hash = window.location.hash.substr(1);
if (hash.length > 8) {
    if (hash.substring(0, 8) == "comment-") {
        disqus();
    }
}
//Remove this if you don't want to load comments for search engines
if(/bot|google|baidu|bing|msn|duckduckgo|slurp|yandex/i.test(navigator.userAgent)) {
   disqus();
}
</script>
